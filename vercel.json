{
  "version": 2,
  "functions": {
    "api/products.js": {
      "maxDuration": 30
    },
    "api/refresh.js": {
      "maxDuration": 30
    },
    "api/conversations.js": {
      "maxDuration": 30
    },
    "api/utils.js": {
      "maxDuration": 30
    },
    "api/debug/auth.js": {
      "maxDuration": 30
    },
    "api/rpc.js": {
      "maxDuration": 30
    }
  },
  "rewrites": [
    { "source": "/oauth/callback", "destination": "/index.html" },
    { "source": "/oauth/callback(.*)", "destination": "/index.html" },
    { "source": "/api/proxy/api/v1/notifications/by-user/(.*)", "destination": "/api/notifications?user_id=$1" },
    { "source": "/api/proxy/api/v1/notifications/read-all/(.*)", "destination": "/api/notifications?user_id=$1" },
    
    { "source": "/api/proxy/api/v1/products", "destination": "/api/products" },
    { "source": "/api/proxy/api/v1/products/(.*)", "destination": "/api/products/$1" },
    { "source": "/api/proxy/api/v1/products-delete", "destination": "/api/products" },
    { "source": "/api/proxy/api/v1/products-update", "destination": "/api/products" },
    { "source": "/api/proxy/api/v1/products-delete/(.*)", "destination": "/api/products/$1" },
    { "source": "/api/proxy/api/v1/products-update/(.*)", "destination": "/api/products/$1" },
    { "source": "/api/proxy/api/v1/auth/refresh", "destination": "/api/refresh" },
    { "source": "/api/proxy/api/v1/auth/sign-in", "destination": "https://agrolinkbackend.onrender.com/api/v1/auth/sign-in" },
    { "source": "/api/proxy/api/v1/auth/sign-up", "destination": "https://agrolinkbackend.onrender.com/api/v1/auth/sign-up" },
    { "source": "/api/proxy/api/v1/auth/oauth/(.*)", "destination": "https://agrolinkbackend.onrender.com/api/v1/auth/oauth/$1" },
    
    { "source": "/api/proxy/api/v1/utils/health", "destination": "/api/utils?action=health" },
    { "source": "/api/proxy/api/v1/utils/warm", "destination": "/api/utils?action=warm" },
    { "source": "/api/proxy/api/v1/utils/status", "destination": "/api/utils?action=status" },
    
    { "source": "/api/proxy/api/v1/ai/deepseek/chat", "destination": "https://agrolinkbackend.onrender.com/api/v1/ai/deepseek/chat" },
    
    { "source": "/api/proxy/api/v1/rpc", "destination": "/api/rpc" },
    { "source": "/api/proxy/api/v1/conversations", "destination": "/api/conversations" },
    { "source": "/api/proxy/api/v1/conversations/(.*)", "destination": "/api/conversations/$1" },
    { "source": "/api/proxy/api/v1/conversations/(.*)/messages", "destination": "/api/conversations/$1/messages" },
    { "source": "/api/proxy/api/v1/conversations/(.*)/messages/(.*)", "destination": "/api/conversations/$1/messages/$2" },
    { "source": "/api/proxy/api/v1/conversations/participants", "destination": "/api/conversations?action=participants" },
    { "source": "/api/proxy/api/v1/debug/auth", "destination": "/api/debug/auth" },

    { "source": "/api/proxy/(.*)", "destination": "https://agrolinkbackend.onrender.com/$1" },
    { "source": "/assets/(.*)", "destination": "/assets/$1" },
    { "source": "/(.*\\.(?:js|css|png|jpg|svg|json|map|ico))", "destination": "/$1" },
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
